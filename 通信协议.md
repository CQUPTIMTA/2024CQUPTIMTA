# 0. 该协议规定起重机上各部分之间的通信

    适用于串口和espnow传输,协议采用大段法，高位字节在前

## 1. 校验码

### 1.1 校验码固定为0x6B

校验码固定出现在包尾

## 2. 识别单元部分

### 2.1 识别单元作为接收方

#### 2.1.1 修改声速
    数据包: ID 0x01 int32_T类型的声速(单位为微米/秒) 校验码
示例 (修改1号传感器的声速为340,000,000)

    0x01 0x01 0x14 0x43 0xFD 0x00 0x6B

#### 2.1.2 修改距离阈值
    数据包: ID 0x02 距离(uint16_t 单位mm) 校验码
示例 (修改1号传感器的阈值为300mm)

    0x01 0x02 0x01 0x2C 0x6B

#### 2.1.3 读取传感器数据
    发送此数据后识别单元会返回传感器数据
    数据包: ID 0x03 校验码
示例

    0x01 0x03 0x6B

#### 2.1.4 读取物体判断结果
    发送此数据后识别单元会返回物体判断结果
    数据包: ID 0x04 校验码
示例

    0x01 0x04 0x6B
#### 2.1.5 读取电池电压
    发送此数据后识别单元会返回电池电压
    数据包: ID 0x05 校验码
示例

    0x01 0x05 0x6B
### 2.2 识别单元作为发送方

#### 2.2.1 传感器数据
此为2.1.3的返回结果,距离单位为mm

    数据包: ID 0x06 距离1(uint16_t) 距离2(uint16_t) 校验码

示例

    0x01 0x06 0x01 0x2C 0x01 0x90 6B
解析:传感器1的数据(0x012C)为300mm,传感器2的数据(0x0190)为400mm

#### 2.2.2 识别结果
此为2.1.4的返回结果

    数据包: ID 0x07 结果(uint8_t) 校验码
    结果的第1，2位bit分别表示传感器1，2前方是否有物体

示例

    0x01 0x07 0x02 6B
0x02&(1)==0
0x02&(1<<1)==1
解析:传感器1前方没有物体，传感器2前方有物体

#### 2.2.3 电池电压
此为2.1.5的返回结果
    数据包: ID 0x08 结果(uint16_t 单位mV) 校验码
示例

    0x01 0x08 0x0E 0x74 6B
解析:电池电压(0x0E74)为3700mv
