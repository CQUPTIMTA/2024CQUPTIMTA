# 0. 该协议规定起重机上各部分之间的通信

    适用于串口和espnow传输,协议采用大段法，高位字节在前
    使用串口发送的数据包在接收成功后需要返回 0x6B
    espnow数据包不需要另外返回接收成功标志

## 1. 校验码

### 1.1 校验码固定为0x6B

校验码固定出现在包尾

## 2. 识别单元部分

### 2.1 识别单元作为接收方

#### 2.1.1 修改声速
    数据包: ID 0x01 int32_T类型的声速(单位为微米/秒) 校验码
示例 (修改1号传感器的声速为340,000,000)

    0x01 0x01 0x14 0x43 0xFD 0x00 0x6B

#### 2.1.2 修改距离阈值
    数据包: ID 0x02 距离(uint16_t 单位mm) 校验码
示例 (修改1号传感器的阈值为300mm)

    0x01 0x02 0x01 0x2C 0x6B

#### 2.1.3 读取传感器数据
    发送此数据后识别单元会返回传感器数据
    数据包: ID 0x03 校验码
示例

    0x01 0x03 0x6B

#### 2.1.4 读取物体判断结果
    发送此数据后识别单元会返回物体判断结果
    数据包: ID 0x04 校验码
示例

    0x01 0x04 0x6B
#### 2.1.5 读取电池电压
    发送此数据后识别单元会返回电池电压
    数据包: ID 0x05 校验码
示例

    0x01 0x05 0x6B
### 2.2 识别单元作为发送方

#### 2.2.1 传感器数据
此为2.1.3的返回结果,距离单位为mm

    数据包: ID 0x06 距离1(uint16_t) 距离2(uint16_t) 校验码

示例

    0x01 0x06 0x01 0x2C 0x01 0x90 6B
解析:传感器1的数据(0x012C)为300mm,传感器2的数据(0x0190)为400mm

#### 2.2.2 识别结果
此为2.1.4的返回结果

    数据包: ID 0x07 结果(uint8_t) 校验码
    结果的第1，2位bit分别表示传感器1，2前方是否有物体

示例

    0x01 0x07 0x02 6B
0x02&(1)==0
0x02&(1<<1)==1
解析:传感器1前方没有物体，传感器2前方有物体

#### 2.2.3 电池电压
此为2.1.5的返回结果
    数据包: ID 0x08 结果(uint16_t 单位mV) 校验码
示例

    0x01 0x08 0x0E 0x74 6B
解析:电池电压(0x0E74)为3700mv

## 3. 横梁主控部分
### 3.1横梁主控部分作为接收方
#### 3.1.1 读取电池电压
    发送此数据后主控会返回电池电压
    数据包: ID 0x05 校验码
示例

    0x01 0x05 0x6B
#### 3.1.2 移动到指定坐标
发送此数据包后横梁以及横梁上两个抓取单元会移动到指定位置 单位0.1mm
位置为0为不执行
    数据包: ID 0x09 Y坐标(uint16_t) 左抓取单元X坐标(uint16_t) 右抓取单元X坐标(uint16_t) 校验码
示例

    0x01 0x09 0x3A 0x98 0x13 0x88 0x27 0x10 0x6B
解析 ID为1的横梁移动到Y=(0x3A98) 1500.0mm处，左抓取单元移动到(0x1388)X=500.0mm处,右抓取单元移动到(0x2710)X=1000.0mm处

移动完成后返回：

    数据包: ID 0x09 校验码
#### 3.1.3 以指定速度移动
发送此数据包后横梁以及横梁上两个抓取单元会以指定速度移动
单位为0.1mm/s 取值范围：-3276.8mm/s——3276.7mm/s
    
    数据包: ID 0x0A Y速度(int16_t) 左抓取单元X速度(int16_t) 右抓取单元X速度(int16_t) 校验码

#### 3.1.4 抓取单元Z移动到指定坐标
发送此数据包后抓取单元会移动到指定高度 单位0.1mm
位置为0为不执行
    数据包: ID 0x0B 左抓取单元Z坐标(uint16_t) 右抓取单元Z坐标(uint16_t) 校验码

移动完成后返回：

    数据包: ID 0x0B 校验码

#### 3.1.5 抓取单元Z以指定速度移动
发送此数据包后横梁上两个抓取单元Z轴会以指定速度移动
单位为0.1mm/s 取值范围：-3276.8mm/s——3276.7mm/s
    数据包: ID 0x0C 左抓取单元Z速度(int16_t) 右抓取单元Z速度(int16_t) 校验码

#### 3.1.6 执行归零
发送此数据包后横梁以及抓取单元会执行归零动作
数据包: ID 0x0D 校验码

#### 3.1.6 控制传感器收放
控制抓取单元的超声波测距的升降

    数据包: ID 0x0E 标志位 校验码
    标志位: 
    第一位为左抓取单元X轴超声波升降控制位
    第二位为左抓取单元Y轴超声波升降控制位
    第三位为右抓取单元X轴超声波升降控制位
    第四位为右抓取单元Y轴超声波升降控制位
示例：
    0x01 0x0E 0x03 0x6B
标志位0x03表示放下左抓取单元的两个传感器

#### 3.1.7 控制夹爪张开或者关闭
控制抓取单元的夹爪张开或者关闭

    数据包: ID 0x0F 标志位 校验码
    标志位: 
    第一位为左抓取单元夹爪控制位
    第二位为右抓取单元夹爪控制位

#### 3.1.8 读取实时数据
读取两个抓取单元及横梁的数据

    数据包: ID 0x10 校验码

横梁会返回数据包

#### 3.1.9 读取阈值数据
读取两个抓取单元及横梁的阈值数据

    数据包: ID 0x11 校验码

横梁会返回数据包

#### 3.1.10 执行精确定位程序
用于精确定位砝码或者木块

    数据包: ID 0x12 左抓取单元定位类型 右抓取单元定位类型 校验码
    定位类型: 
    0x00 为不定位
    0x01 为定位砝码
    0x02 为定位木块

    定位完成会返回
    数据包: ID 0x12 校验码
#### 3.1.11 执行精准放下砝码程序
用于最后阶段精准放下砝码到木块
    数据包: ID 0x13 校验码

    完成会返回
    数据包: ID 0x13 校验码
#### 3.1.12 修改参数
修改抓取单元和横梁的各项阈值

    数据包: ID 0x14 修改目标主控 修改项目 数据 校验码
    修改目标主控: 0x00为横梁主控 0x01为左抓取单元 0x02为右抓取单元
    修改项目:



